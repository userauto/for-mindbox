# Тестовое задание Mindbox на позицию SRE

## Решите задачу ниже. 

Код должен открываться в браузере, без архивов, GitHub будет идеальным.

Задача

Не ожидаем production-ready решения. Сделайте, как кажется правильным, опишите процесс поиска и принятые решения.

Опишите решение для веб-приложения в kubernetes в виде yaml-манифеста. Оставляйте в коде комментарии по принятым решениям. Есть следующие вводные:

у нас мультизональный кластер (три зоны), в котором пять нод
приложение требует около 5-10 секунд для инициализации
по результатам нагрузочного теста известно, что 4 пода справляются с пиковой нагрузкой
на первые запросы приложению требуется значительно больше ресурсов CPU, в дальнейшем потребление ровное в районе 0.1 CPU. По памяти всегда “ровно” в районе 128M memory
приложение имеет дневной цикл по нагрузке – ночью запросов на порядки меньше, пик – днём
хотим максимально отказоустойчивый deployment
хотим минимального потребления ресурсов от этого deployment’а

## Решение.
Если у нас есть три зоны доступности, то я бы для высокой отказоустойчивости добавил еще одну ноду и архитектура кластер выглядел бы следующим образом:

- Три мастер-ноды в зонах A, B, C: 
    - master-1 в зоне A 
    - master-2 в зоне B 
    - master-3 в зоне C

- Три воркер-ноды в зонах A, B, C: 
    - worker-1 в зоне А 
    - worker-2 в зоне B
    - worker-3 в зоне C

Хоть и не получится при пиковой нагрузке равнозначно разделить количество подов(их у нас 4) по воркер-нодам(их у нас 3), и немного теряется эффективность репликации приложения, но зато мы получаем высокую отказоустойчивость.

В условии задачи точно не сказано сколько требуется процессорного времени в период максимальной нагрузки(как я понял максимальная нагрузка возрастает после старта приложения), будем считать, что в пике утилизация СPU возрастает в 3 раза, с учетом того что средняя нагрузка составляет 0.1, то в пике она будет равняться 0.3 CPU на один под. Если расмотреть ситуацию, что если из трех зон доступности останется доступной только одна зона и 4 пода будут работать на одной воркер-ноде, 4 пода будут утилизировать 1,2 CPU. Также нужно учитывать утилизацию рессурсув и другими процессами, поэтому минимальные требования будут следующими:
    - CPU 4 ядра
    - RAM 4G
